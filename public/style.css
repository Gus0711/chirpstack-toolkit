@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&family=Outfit:wght@300;400;500;600;700&display=swap');

:root {
  --accent: #00d4aa;
  --accent-dim: rgba(0, 212, 170, 0.12);
  --accent-glow: rgba(0, 212, 170, 0.2);
}

/* Base */
body {
  background-color: #180e0a;
  background-image: radial-gradient(ellipse at top, rgba(0, 212, 170, 0.035) 0%, transparent 50%);
  font-family: 'Outfit', system-ui, -apple-system, sans-serif;
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* Navigation */
.nav-link {
  color: rgba(255, 255, 255, 0.5);
  transition: all 0.15s;
}

.nav-link:hover {
  color: rgba(255, 255, 255, 0.8);
  background: rgba(255, 255, 255, 0.1);
}

.nav-link.active {
  color: var(--accent);
  background: var(--accent-dim);
}

/* Time Buttons */
.time-btn {
  color: rgba(255, 255, 255, 0.6);
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  transition: all 0.15s;
}

.time-btn:hover {
  background: rgba(255, 255, 255, 0.1);
}

.time-btn.active {
  color: var(--accent);
  background: var(--accent-dim);
  border-color: rgba(0, 212, 170, 0.3);
}

/* Toggle Buttons */
.toggle-btn {
  color: rgba(255, 255, 255, 0.6);
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  transition: all 0.15s;
}

.toggle-btn:hover {
  background: rgba(255, 255, 255, 0.1);
}

.toggle-btn.active {
  color: var(--accent);
  background: var(--accent-dim);
  border-color: rgba(0, 212, 170, 0.3);
}

/* Gateway Tabs */
.gateway-tab {
  color: rgba(255, 255, 255, 0.5);
  background: transparent;
  border: 1px solid transparent;
  transition: all 0.15s;
  white-space: nowrap;
}

.gateway-tab:hover {
  color: rgba(255, 255, 255, 0.8);
  background: rgba(255, 255, 255, 0.1);
}

.gateway-tab.active {
  color: var(--accent);
  background: var(--accent-dim);
  border-color: rgba(0, 212, 170, 0.3);
}

/* Stat Cards */
.stat-card {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 0.5rem;
  padding: 1rem 1.25rem;
  transition: border-color 0.2s, box-shadow 0.2s;
}

.stat-card:hover {
  border-color: rgba(0, 212, 170, 0.2);
  box-shadow: 0 0 20px rgba(0, 212, 170, 0.06);
}

.stat-card.accent-teal { border-left: 3px solid #00d4aa; }
.stat-card.accent-blue { border-left: 3px solid #3b82f6; }
.stat-card.accent-amber { border-left: 3px solid #f59e0b; }
.stat-card.accent-orange { border-left: 3px solid #f97316; }
.stat-card.accent-purple { border-left: 3px solid #a855f7; }
.stat-card.accent-green { border-left: 3px solid #22c55e; }
.stat-card.accent-red { border-left: 3px solid #ef4444; }

.stat-card .label {
  color: rgba(255, 255, 255, 0.5);
  font-size: 0.75rem;
  margin-bottom: 0.25rem;
}

.stat-card .value {
  font-size: 1.5rem;
  font-weight: 600;
  color: rgba(255, 255, 255, 0.9);
}

/* Chart Cards */
.chart-card {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 0.5rem;
  padding: 1rem;
  transition: border-color 0.2s;
}

.chart-card:hover {
  border-color: rgba(255, 255, 255, 0.2);
}

.chart-title {
  font-size: 0.875rem;
  font-weight: 500;
  margin-bottom: 0.75rem;
  color: rgba(255, 255, 255, 0.9);
}

/* Select dropdowns - fix white text on native white background */
select option {
  background-color: #1e1410;
  color: #e5e5e5;
}

/* Panels */
.panel {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 0.5rem;
  padding: 1rem;
  transition: border-color 0.2s;
}

.panel:hover {
  border-color: rgba(255, 255, 255, 0.18);
}

.panel-title {
  font-size: 0.875rem;
  font-weight: 500;
  margin-bottom: 0.75rem;
  color: rgba(255, 255, 255, 0.9);
}

/* Live Feed Header */
.live-header {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 4px 8px;
  margin-left: 3px;
}

/* Sortable Column Headers */
.live-header .sort-col {
  cursor: pointer;
  user-select: none;
  display: inline-flex;
  align-items: center;
  gap: 3px;
  transition: color 0.15s;
  border-radius: 2px;
  padding: 1px 2px;
  margin: -1px -2px;
}

.live-header .sort-col:hover {
  color: rgba(255, 255, 255, 0.7);
  background: rgba(255, 255, 255, 0.05);
}

.live-header .sort-col.sort-active {
  color: var(--accent);
}

.sort-arrow {
  font-size: 8px;
  line-height: 1;
  flex-shrink: 0;
}

/* Live Feed Entries */
.live-entry {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 4px 8px;
  border-radius: 3px;
  background: rgba(255, 255, 255, 0.02);
  border-left: 3px solid rgba(255, 255, 255, 0.2);
  transition: background 0.15s, border-left-color 0.15s, box-shadow 0.15s;
}

/* 1. Zebra striping */
.live-entry:nth-child(even) {
  background: rgba(255, 255, 255, 0.05);
}

/* 2. Enhanced hover */
.live-entry:hover {
  background: rgba(255, 255, 255, 0.1);
  border-left-color: var(--accent);
  box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.04);
}

.live-entry.data {
  border-left-color: #22c55e;
}

.live-entry.join_request {
  border-left-color: #eab308;
}

.live-entry.downlink {
  border-left-color: #3b82f6;
  background: rgba(59, 130, 246, 0.04);
}
.live-entry.downlink:nth-child(even) {
  background: rgba(59, 130, 246, 0.08);
}

.live-entry.tx_ack {
  border-left-color: #a855f7;
  background: rgba(168, 85, 247, 0.04);
}
.live-entry.tx_ack:nth-child(even) {
  background: rgba(168, 85, 247, 0.08);
}

.live-entry.my-device {
  background: rgba(34, 197, 94, 0.04);
}
.live-entry.my-device:nth-child(even) {
  background: rgba(34, 197, 94, 0.08);
}

/* 3. New packet flash animation */
@keyframes packet-flash {
  0%   { box-shadow: inset 0 0 0 100px rgba(0, 212, 170, 0.18); }
  100% { box-shadow: inset 0 0 0 100px transparent; }
}

.live-entry.new-packet {
  animation: packet-flash 1.2s ease-out;
}

.live-entry .time {
  color: rgba(255, 255, 255, 0.4);
  width: 140px;
  flex-shrink: 0;
}

.live-entry .operator {
  width: 120px;
  flex-shrink: 0;
}

/* 6. Type column container */
.live-entry .type {
  width: 150px;
  flex-shrink: 0;
}

/* Type badges (pill shape) */
.type-badge {
  display: inline-block;
  padding: 2px 8px;
  border-radius: 10px;
  font-size: 9px;
  font-weight: 600;
  letter-spacing: 0.4px;
  text-transform: uppercase;
  white-space: nowrap;
}

.type-badge.up {
  color: #4ade80;
  background: rgba(74, 222, 128, 0.12);
}

.type-badge.join {
  color: #eab308;
  background: rgba(234, 179, 8, 0.12);
}

.type-badge.downlink {
  color: #60a5fa;
  background: rgba(59, 130, 246, 0.12);
}

.type-badge.ack {
  color: #c084fc;
  background: rgba(168, 85, 247, 0.12);
}

.live-entry .addr {
  color: #d1d5db;
  width: 130px;
  flex-shrink: 0;
}

.live-entry .addr.join {
  color: #fbbf24;
}

.live-entry .addr.mine {
  color: #60a5fa;
}

.live-entry .fcnt {
  color: rgba(255, 255, 255, 0.5);
  width: 170px;
  flex-shrink: 0;
}

.live-entry .fcnt.join-eui {
  color: #a78bfa;
}

.live-entry .fport {
  color: rgba(255, 255, 255, 0.5);
  width: 48px;
  flex-shrink: 0;
}

.live-entry .dr {
  color: #a78bfa;
  width: 80px;
  flex-shrink: 0;
}

.live-entry .freq {
  color: rgba(255, 255, 255, 0.4);
  width: 56px;
  flex-shrink: 0;
}

/* 4. Signal cells with mini bars */
.live-entry .rssi {
  width: 72px;
  flex-shrink: 0;
}

.live-entry .snr {
  width: 64px;
  flex-shrink: 0;
}

.signal-cell {
  display: flex;
  flex-direction: column;
  gap: 2px;
  line-height: 1;
}

.signal-cell .signal-val {
  font-size: inherit;
}

.signal-bar {
  width: 100%;
  height: 2px;
  background: rgba(255, 255, 255, 0.08);
  border-radius: 1px;
  overflow: hidden;
}

.signal-fill {
  height: 100%;
  border-radius: 1px;
  transition: width 0.3s ease;
}

.signal-cell.good .signal-fill { background: #4ade80; }
.signal-cell.medium .signal-fill { background: #fbbf24; }
.signal-cell.bad .signal-fill { background: #f87171; }

.live-entry .size {
  color: rgba(255, 255, 255, 0.4);
  width: 40px;
  flex-shrink: 0;
}

.live-entry .airtime {
  color: rgba(255, 255, 255, 0.4);
  width: 64px;
  flex-shrink: 0;
}

.live-entry .gw {
  color: rgba(255, 255, 255, 0.3);
  width: 130px;
  flex-shrink: 0;
  font-size: 10px;
}

/* Address cell with device name */
.live-entry .addr-cell {
  display: flex;
  flex-direction: column;
  width: 160px;
  flex-shrink: 0;
  line-height: 1.2;
}

.live-entry .addr-cell .addr {
  width: auto;
}

.live-entry .addr-name {
  font-family: 'Outfit', system-ui, sans-serif;
  font-size: 9px;
  color: rgba(255, 255, 255, 0.35);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 155px;
}

/* DevEUI column */
.live-entry .dev-eui {
  color: rgba(255, 255, 255, 0.3);
  width: 150px;
  flex-shrink: 0;
  font-size: 10px;
}

.live-entry .dev-eui.join-eui {
  color: #a78bfa;
}

/* Signal Quality Colors */
.good { color: #4ade80; }
.medium { color: #fbbf24; }
.bad { color: #f87171; }

/* Operator Colors */
.op-ttn { color: #22c55e; }
.op-helium { color: #a855f7; }
.op-private { color: #3b82f6; }
.op-unknown { color: rgba(255, 255, 255, 0.4); }

/* Device List Item */
.device-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 6px 8px;
  border-radius: 4px;
  cursor: pointer;
  transition: background 0.15s;
  font-family: 'JetBrains Mono', ui-monospace, monospace;
  font-size: 11px;
  background: rgba(255, 255, 255, 0.05);
  color: rgba(255, 255, 255, 0.7);
}

.device-item:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(0, 212, 170, 0.15);
}

.device-item.mine {
  border-left: 2px solid #3b82f6;
  color: #60a5fa;
}

.device-item .stats {
  color: rgba(255, 255, 255, 0.4);
  font-size: 10px;
}

/* Join List Item */
.join-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 6px 8px;
  border-radius: 4px;
  font-family: 'JetBrains Mono', ui-monospace, monospace;
  font-size: 11px;
  background: rgba(255, 255, 255, 0.05);
  border-left: 2px solid #eab308;
}

.join-item .eui {
  color: rgba(255, 255, 255, 0.7);
}

.join-item .stats {
  color: rgba(255, 255, 255, 0.4);
  font-size: 10px;
}

/* Duty Cycle Colors */
.duty-low { color: #4ade80; }
.duty-medium { color: #fbbf24; }
.duty-high { color: #f87171; }

/* Device Breakdown */
.breakdown-row {
  padding: 8px;
  background: rgba(255, 255, 255, 0.03);
  border-radius: 4px;
  margin-bottom: 6px;
}

.breakdown-bar {
  height: 4px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 2px;
  overflow: hidden;
}

.breakdown-bar-fill {
  height: 100%;
  border-radius: 2px;
  transition: width 0.3s ease;
}

.breakdown-bar-fill.op-ttn { background: #22c55e; }
.breakdown-bar-fill.op-helium { background: #a855f7; }
.breakdown-bar-fill.op-private { background: #3b82f6; }
.breakdown-bar-fill.op-unknown { background: rgba(255, 255, 255, 0.3); }

/* Device Detail List */
.device-detail-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 6px 10px;
  background: rgba(255, 255, 255, 0.03);
  border-radius: 4px;
  border-left: 2px solid transparent;
  font-size: 11px;
  cursor: pointer;
}

.device-detail-item:hover {
  background: rgba(255, 255, 255, 0.08);
}

.device-detail-item.mine {
  border-left-color: #3b82f6;
  background: rgba(59, 130, 246, 0.05);
}

.device-detail-main {
  display: flex;
  align-items: center;
  gap: 8px;
}

.device-addr {
  font-family: 'JetBrains Mono', ui-monospace, monospace;
  font-weight: 500;
  color: rgba(255, 255, 255, 0.8);
}

.device-operator {
  font-size: 10px;
  padding: 1px 5px;
  border-radius: 3px;
  background: rgba(255, 255, 255, 0.1);
}

.device-detail-stats {
  display: flex;
  align-items: center;
  gap: 12px;
  color: rgba(255, 255, 255, 0.5);
  font-size: 10px;
}

.device-sf {
  font-size: 10px;
  color: rgba(255, 255, 255, 0.6);
  font-family: 'JetBrains Mono', ui-monospace, monospace;
}

.device-interval {
  font-size: 10px;
  color: rgba(255, 255, 255, 0.5);
}

.device-packets {
  font-size: 10px;
  color: rgba(255, 255, 255, 0.5);
}

.device-signal-group {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 2px 6px;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 3px;
}

.signal-label {
  font-size: 9px;
  color: rgba(255, 255, 255, 0.3);
  text-transform: uppercase;
}

.signal-val {
  font-weight: 600;
  min-width: 28px;
  text-align: right;
}

.signal-range {
  font-size: 9px;
  color: rgba(255, 255, 255, 0.3);
  min-width: 50px;
}

.device-lastseen {
  min-width: 25px;
  text-align: right;
  color: rgba(255, 255, 255, 0.3);
}

/* Summary Panel */
.summary-section {
  padding: 8px;
  background: rgba(255, 255, 255, 0.03);
  border-radius: 4px;
}

.summary-title {
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: rgba(255, 255, 255, 0.4);
  margin-bottom: 6px;
}

.summary-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 12px;
  padding: 2px 0;
}

/* Activity Indicator */
.activity-indicator {
  width: 8px;
  height: 32px;
  border-radius: 2px;
  flex-shrink: 0;
}

/* Device Modal */
.modal {
  position: fixed;
  inset: 0;
  z-index: 1000;
  display: flex;
  align-items: center;
  justify-content: center;
}

.modal.hidden {
  display: none;
}

.modal-backdrop {
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.7);
  backdrop-filter: blur(4px);
}

.modal-content {
  position: relative;
  background: #1a1210;
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 8px;
  width: 90%;
  max-width: 900px;
  max-height: 85vh;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 20px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  background: rgba(255, 255, 255, 0.03);
}

.modal-close {
  font-size: 24px;
  color: rgba(255, 255, 255, 0.5);
  background: none;
  border: none;
  cursor: pointer;
  padding: 0 8px;
  line-height: 1;
}

.modal-close:hover {
  color: white;
}

.modal-body {
  padding: 20px;
  overflow-y: auto;
  flex: 1;
}

.modal-grid {
  display: grid;
  grid-template-columns: 280px 1fr;
  gap: 20px;
}

@media (max-width: 768px) {
  .modal-grid {
    grid-template-columns: 1fr;
  }
}

.modal-stats {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.modal-stat-card {
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 6px;
  padding: 12px;
}

.modal-stat-card.mine {
  border-left: 3px solid #3b82f6;
  background: rgba(59, 130, 246, 0.05);
}

.stat-header {
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: rgba(255, 255, 255, 0.5);
  margin-bottom: 8px;
  font-weight: 500;
}

.stat-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 4px 0;
  font-size: 12px;
}

.stat-label {
  color: rgba(255, 255, 255, 0.5);
}

.modal-chart-area {
  display: flex;
  flex-direction: column;
}

.modal-chart-container {
  height: 200px;
  background: rgba(255, 255, 255, 0.02);
  border-radius: 6px;
  padding: 10px;
}

.modal-activity-list {
  max-height: 200px;
  overflow-y: auto;
  background: rgba(255, 255, 255, 0.02);
  border-radius: 6px;
  padding: 8px;
}

.activity-entry {
  display: flex;
  gap: 12px;
  padding: 4px 8px;
  font-size: 11px;
  font-family: 'JetBrains Mono', ui-monospace, monospace;
  border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}

.activity-entry:last-child {
  border-bottom: none;
}

.activity-time {
  color: rgba(255, 255, 255, 0.4);
  min-width: 100px;
}

.activity-fcnt {
  color: rgba(255, 255, 255, 0.6);
  min-width: 80px;
}

/* Dual RSSI range slider */
.rssi-range-wrap {
  position: relative;
  width: 200px;
  height: 16px;
}

.rssi-range {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  -webkit-appearance: none;
  appearance: none;
  background: transparent;
  pointer-events: none;
  margin: 0;
}

.rssi-range::-webkit-slider-runnable-track {
  height: 3px;
  background: rgba(255, 255, 255, 0.15);
  border-radius: 2px;
}

.rssi-range-max::-webkit-slider-runnable-track {
  background: transparent;
}

.rssi-range::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: #3b82f6;
  cursor: pointer;
  pointer-events: all;
  margin-top: -4px;
}

.rssi-range::-moz-range-track {
  height: 3px;
  background: rgba(255, 255, 255, 0.15);
  border-radius: 2px;
  border: none;
}

.rssi-range-max::-moz-range-track {
  background: transparent;
}

.rssi-range::-moz-range-thumb {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: #3b82f6;
  cursor: pointer;
  pointer-events: all;
  border: none;
}

/* Global Search */
.global-search-wrap {
  position: relative;
}

.global-search-dropdown {
  position: absolute;
  top: 100%;
  left: 0;
  right: 0;
  min-width: 350px;
  max-height: 400px;
  overflow-y: auto;
  background: #1e1410;
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 6px;
  margin-top: 4px;
  z-index: 1000;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.5);
}

.global-search-dropdown.hidden {
  display: none;
}

.search-result-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 10px;
  cursor: pointer;
  font-size: 12px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.05);
  transition: background 0.1s;
}

.search-result-item:last-child {
  border-bottom: none;
}

.search-result-item:hover,
.search-result-item.selected {
  background: rgba(255, 255, 255, 0.1);
}

.search-result-addr {
  font-family: 'JetBrains Mono', ui-monospace, monospace;
  font-weight: 600;
  color: rgba(255, 255, 255, 0.9);
  flex-shrink: 0;
}

.search-result-name {
  color: rgba(255, 255, 255, 0.6);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 150px;
}

.search-result-eui {
  font-family: 'JetBrains Mono', ui-monospace, monospace;
  font-size: 10px;
  color: rgba(255, 255, 255, 0.3);
  flex-shrink: 0;
}

.search-result-op {
  font-size: 10px;
  color: rgba(255, 255, 255, 0.4);
  margin-left: auto;
  flex-shrink: 0;
}

.search-no-results {
  padding: 12px;
  text-align: center;
  color: rgba(255, 255, 255, 0.3);
  font-size: 12px;
}

.search-star {
  background: none;
  border: none;
  cursor: pointer;
  font-size: 14px;
  color: rgba(255, 255, 255, 0.15);
  padding: 0;
  line-height: 1;
  flex-shrink: 0;
  transition: color 0.15s;
}

.search-star:hover {
  color: rgba(234, 179, 8, 0.6);
}

.search-star.active {
  color: #eab308;
}

/* Favorite star in device list */
.fav-star {
  background: none;
  border: none;
  cursor: pointer;
  font-size: 12px;
  color: rgba(255, 255, 255, 0.1);
  padding: 0 2px;
  line-height: 1;
  flex-shrink: 0;
  transition: color 0.15s;
}

.fav-star:hover {
  color: rgba(234, 179, 8, 0.6);
}

.fav-star.active {
  color: #eab308;
}

/* Custom Modal (confirm/prompt replacement) */
.custom-modal {
  position: fixed;
  inset: 0;
  z-index: 1100;
  display: flex;
  align-items: center;
  justify-content: center;
}

.custom-modal.hidden {
  display: none;
}

.custom-modal-backdrop {
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.7);
  backdrop-filter: blur(4px);
}

.custom-modal-content {
  position: relative;
  background: #1a1210;
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 8px;
  padding: 20px 24px;
  width: 90%;
  max-width: 420px;
}

/* Language Selector */
.lang-btn {
  color: rgba(255, 255, 255, 0.4);
  background: transparent;
  border: none;
  cursor: pointer;
  transition: all 0.15s;
  font-weight: 500;
}

.lang-btn:hover {
  color: rgba(255, 255, 255, 0.7);
  background: rgba(255, 255, 255, 0.1);
}

.lang-btn.active {
  color: var(--accent);
  background: var(--accent-dim);
}

/* Help Button */
.help-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 14px;
  height: 14px;
  border-radius: 50%;
  border: 1px solid rgba(255, 255, 255, 0.2);
  background: rgba(255, 255, 255, 0.05);
  color: rgba(255, 255, 255, 0.35);
  font-size: 9px;
  font-weight: 600;
  line-height: 1;
  cursor: pointer;
  margin-left: 4px;
  padding: 0;
  vertical-align: middle;
  transition: all 0.15s;
  flex-shrink: 0;
}

.help-btn:hover {
  color: var(--accent);
  border-color: var(--accent);
  background: var(--accent-dim);
}

/* Help Tooltip */
.help-tooltip {
  position: fixed;
  z-index: 2000;
  max-width: 340px;
  padding: 12px 16px;
  background: #1e1410;
  border: 1px solid rgba(0, 212, 170, 0.3);
  border-radius: 8px;
  color: rgba(255, 255, 255, 0.85);
  font-size: 12px;
  line-height: 1.5;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.6);
  pointer-events: auto;
  animation: tooltip-fade 0.15s ease-out;
}

.help-tooltip.hidden {
  display: none;
}

@keyframes tooltip-fade {
  from { opacity: 0; transform: translateY(4px); }
  to   { opacity: 1; transform: translateY(0); }
}

/* Accent value color */
.stat-card .value {
  color: rgba(255, 255, 255, 0.95);
}

/* Nav icon color inherits from parent link */
.nav-link svg {
  opacity: 0.7;
}

.nav-link.active svg {
  opacity: 1;
}

/* Tool Tiles Grid */
.tool-tile {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.75rem;
  padding: 1.75rem 1rem;
  background: rgba(255, 255, 255, 0.04);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 0.75rem;
  cursor: pointer;
  transition: all 0.25s;
  text-align: center;
}

.tool-tile:hover {
  border-color: var(--accent);
  background: rgba(0, 212, 170, 0.06);
  box-shadow: 0 4px 24px rgba(0, 212, 170, 0.1);
  transform: translateY(-2px);
}

.tool-tile svg {
  color: var(--accent);
}

.tool-tile strong {
  color: rgba(255, 255, 255, 0.9);
  font-size: 0.875rem;
}

.tool-tile .tile-desc {
  color: rgba(255, 255, 255, 0.4);
  font-size: 0.75rem;
  line-height: 1.4;
}

/* Tool navigation bar (breadcrumb back) */
.tool-nav-bar {
  display: flex;
  align-items: center;
  gap: 0.625rem;
  padding: 0.625rem 1rem;
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 0.5rem;
  margin-bottom: 0.75rem;
  cursor: pointer;
  transition: all 0.2s;
}

.tool-nav-bar:hover {
  background: var(--accent-dim);
  border-color: rgba(0, 212, 170, 0.25);
}

.tool-nav-bar > svg:first-child {
  color: var(--accent);
  flex-shrink: 0;
  transition: transform 0.2s;
}

.tool-nav-bar:hover > svg:first-child {
  transform: translateX(-3px);
}

.tool-nav-breadcrumb {
  color: rgba(255, 255, 255, 0.4);
  font-size: 0.8125rem;
  font-weight: 400;
}

.tool-nav-bar:hover .tool-nav-breadcrumb {
  color: var(--accent);
}

.tool-nav-current {
  display: flex;
  align-items: center;
  gap: 0.375rem;
  color: rgba(255, 255, 255, 0.85);
  font-size: 0.8125rem;
  font-weight: 500;
}

.tool-nav-current svg {
  color: var(--accent);
  opacity: 0.7;
}

/* ============================================
   MQTT Explorer
   ============================================ */

/* Tree row */
.mqtt-tree-row {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 2px 8px;
  height: 28px;
  cursor: pointer;
  transition: background 0.1s;
  white-space: nowrap;
  border-left: 2px solid transparent;
}

.mqtt-tree-row:hover {
  background: rgba(255, 255, 255, 0.06);
}

.mqtt-tree-row.selected {
  background: rgba(0, 212, 170, 0.12);
  border-left-color: var(--accent);
}
.mqtt-tree-row.selected .tree-segment {
  color: #fff;
}

/* Tree indent guide lines */
.tree-indent {
  position: relative;
  display: inline-block;
}
.tree-indent-guide {
  position: absolute;
  top: 0;
  bottom: 0;
  width: 1px;
  background: rgba(255, 255, 255, 0.06);
}

.mqtt-tree-row .tree-arrow {
  width: 12px;
  flex-shrink: 0;
  color: rgba(255, 255, 255, 0.3);
  font-size: 8px;
  text-align: center;
  transition: transform 0.15s;
}

.mqtt-tree-row .tree-arrow.expanded {
  transform: rotate(90deg);
}

/* Activity badge */
.tree-activity {
  width: 5px;
  height: 5px;
  border-radius: 50%;
  flex-shrink: 0;
  margin-right: 2px;
  transition: background 0.3s;
}
.tree-activity.activity-hot  { background: #4ade80; }
.tree-activity.activity-warm { background: #f59e0b; }
.tree-activity.activity-cold { background: rgba(255, 255, 255, 0.12); }

.mqtt-tree-row .tree-segment {
  color: rgba(255, 255, 255, 0.85);
  flex-shrink: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 180px;
}

.mqtt-tree-row .tree-count {
  color: rgba(255, 255, 255, 0.25);
  font-size: 9px;
  margin-left: 4px;
  flex-shrink: 0;
}

.mqtt-tree-row .tree-rate {
  color: var(--accent);
  font-size: 9px;
  margin-left: 4px;
  flex-shrink: 0;
  opacity: 0.7;
}

/* Resolved name (device/application name from ChirpStack) */
.tree-resolved-name {
  color: var(--accent);
  font-size: 10px;
  font-weight: 500;
  margin-left: 4px;
  flex-shrink: 1;
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  max-width: 140px;
  opacity: 0.8;
}

/* Dim segment when resolved name is shown */
.tree-segment.has-resolved-name {
  color: rgba(255, 255, 255, 0.4);
  font-size: 10px;
}

.mqtt-tree-row .tree-preview {
  color: rgba(255, 255, 255, 0.2);
  font-size: 10px;
  margin-left: auto;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 200px;
}

.mqtt-tree-row .tree-retain {
  color: #f59e0b;
  font-size: 8px;
  font-weight: 700;
  margin-left: 4px;
}

/* Detail panel tabs */
.mqtt-detail-tab {
  padding: 6px 12px;
  font-size: 12px;
  color: rgba(255, 255, 255, 0.4);
  border-bottom: 2px solid transparent;
  cursor: pointer;
  transition: color 0.15s, border-color 0.15s;
  background: none;
  border-top: none;
  border-left: none;
  border-right: none;
  display: flex;
  align-items: center;
  gap: 4px;
}
.mqtt-detail-tab:hover { color: rgba(255, 255, 255, 0.7); }
.mqtt-detail-tab.active {
  color: var(--accent);
  border-bottom-color: var(--accent);
}
.mqtt-detail-tab.has-content::after {
  content: '';
  width: 5px;
  height: 5px;
  border-radius: 50%;
  background: var(--accent);
  margin-left: 4px;
}

/* JSON syntax highlighting — VS Code Dark+ theme */
.mqtt-json-view {
  line-height: 1.6;
  white-space: pre-wrap;
  word-break: break-all;
}

.mqtt-json-key { color: #9CDCFE; }
.mqtt-json-string { color: #CE9178; }
.mqtt-json-number { color: #B5CEA8; }
.mqtt-json-bool { color: #569CD6; }
.mqtt-json-null { color: #808080; }
.mqtt-json-bracket { color: rgba(255, 255, 255, 0.45); }
.mqtt-json-toggle {
  cursor: pointer;
  color: rgba(255, 255, 255, 0.35);
  user-select: none;
}
.mqtt-json-toggle:hover {
  color: var(--accent);
}

/* Diff — GitHub style */
.mqtt-diff-container {
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 6px;
  overflow: hidden;
}

.mqtt-diff-line {
  display: flex;
  align-items: stretch;
  min-height: 20px;
  line-height: 20px;
}

.mqtt-diff-ln {
  width: 36px;
  text-align: right;
  padding: 0 6px;
  color: rgba(255, 255, 255, 0.2);
  user-select: none;
  flex-shrink: 0;
  font-size: 10px;
}

.mqtt-diff-marker {
  width: 16px;
  text-align: center;
  flex-shrink: 0;
  font-weight: 600;
}

.mqtt-diff-text {
  flex: 1;
  padding: 0 8px 0 4px;
  white-space: pre-wrap;
  word-break: break-all;
}

.mqtt-diff-line.mqtt-diff-add {
  background: rgba(46, 160, 67, 0.15);
  color: #7ee787;
}
.mqtt-diff-line.mqtt-diff-add .mqtt-diff-ln { color: rgba(126, 231, 135, 0.3); }
.mqtt-diff-line.mqtt-diff-add .mqtt-diff-marker { color: #7ee787; }

.mqtt-diff-line.mqtt-diff-remove {
  background: rgba(248, 81, 73, 0.15);
  color: #ffa198;
}
.mqtt-diff-line.mqtt-diff-remove .mqtt-diff-ln { color: rgba(255, 161, 152, 0.3); }
.mqtt-diff-line.mqtt-diff-remove .mqtt-diff-marker { color: #ffa198; }

.mqtt-diff-line.mqtt-diff-ctx {
  color: rgba(255, 255, 255, 0.5);
}
.mqtt-diff-line.mqtt-diff-ctx .mqtt-diff-marker { color: rgba(255, 255, 255, 0.15); }

/* Subscription chip */
.mqtt-sub-chip {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 2px 8px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 4px;
  font-size: 11px;
  font-family: 'JetBrains Mono', ui-monospace, monospace;
  color: rgba(255, 255, 255, 0.7);
}

.mqtt-sub-chip button {
  color: rgba(255, 255, 255, 0.3);
  background: none;
  border: none;
  cursor: pointer;
  font-size: 14px;
  line-height: 1;
  padding: 0;
}

.mqtt-sub-chip button:hover {
  color: #f87171;
}

/* Publish drawer (slide-up) */
.mqtt-publish-drawer {
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  background: rgba(255, 255, 255, 0.03);
  flex-shrink: 0;
  transform: translateY(0);
  transition: transform 0.25s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.2s;
  animation: mqtt-drawer-slide-up 0.25s cubic-bezier(0.4, 0, 0.2, 1);
}

@keyframes mqtt-drawer-slide-up {
  from { transform: translateY(100%); opacity: 0; }
  to   { transform: translateY(0);    opacity: 1; }
}

/* Publish panel toggle */
#mqtt-publish-chevron.open {
  transform: rotate(180deg);
}

/* Status bar */
.mqtt-status-bar {
  flex-shrink: 0;
  padding: 3px 16px;
  font-size: 11px;
  background: rgba(0, 0, 0, 0.25);
  border-top: 1px solid rgba(255, 255, 255, 0.06);
  display: flex;
  align-items: center;
}
.mqtt-status-bar.hidden { display: none; }

/* New topics badge (floating at bottom of tree pane) */
.mqtt-new-topics-badge {
  position: absolute;
  bottom: 8px;
  left: 50%;
  transform: translateX(-50%);
  padding: 4px 12px;
  background: rgba(0, 212, 170, 0.15);
  border: 1px solid rgba(0, 212, 170, 0.3);
  border-radius: 12px;
  color: var(--accent);
  font-size: 11px;
  font-weight: 500;
  cursor: pointer;
  z-index: 10;
  backdrop-filter: blur(8px);
  transition: background 0.15s, transform 0.15s;
  white-space: nowrap;
}

.mqtt-new-topics-badge:hover {
  background: rgba(0, 212, 170, 0.25);
}

.mqtt-new-topics-badge.hidden {
  display: none;
}

/* ============================================
   MQTT Visualizer (JSON Graph/Node View)
   ============================================ */

/* Viewport */
.mqtt-viz-viewport {
  position: relative;
  overflow: hidden;
  background-color: rgba(10, 10, 10, 0.4);
  background-image: radial-gradient(circle, rgba(255, 255, 255, 0.06) 1px, transparent 1px);
  background-size: 20px 20px;
  width: 100%;
  height: 100%;
}

.mqtt-viz-viewport-inner {
  position: absolute;
  inset: 0;
  overflow: visible;
}

.mqtt-viz-node-layer {
  position: absolute;
  top: 0;
  left: 0;
  transform-origin: 0 0;
}

.mqtt-viz-svg {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  overflow: visible;
  pointer-events: none;
  transform-origin: 0 0;
}

/* Toolbar */
.mqtt-viz-toolbar {
  position: absolute;
  top: 8px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 10;
  display: flex;
  align-items: center;
  gap: 2px;
  padding: 3px 4px;
  background: rgba(24, 14, 10, 0.9);
  border: 1px solid rgba(255, 255, 255, 0.12);
  border-radius: 6px;
  backdrop-filter: blur(12px);
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.4);
}

.mqtt-viz-toolbar-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 24px;
  border: none;
  border-radius: 4px;
  background: transparent;
  color: rgba(255, 255, 255, 0.45);
  cursor: pointer;
  transition: background 0.12s, color 0.12s;
}

.mqtt-viz-toolbar-btn:hover {
  background: rgba(255, 255, 255, 0.1);
  color: var(--accent);
}

.mqtt-viz-zoom-label {
  font-size: 10px;
  font-weight: 600;
  color: rgba(255, 255, 255, 0.4);
  min-width: 36px;
  text-align: center;
  user-select: none;
  font-family: 'JetBrains Mono', ui-monospace, monospace;
}

.mqtt-viz-toolbar-sep {
  width: 1px;
  height: 14px;
  background: rgba(255, 255, 255, 0.1);
  margin: 0 3px;
  flex-shrink: 0;
}

/* Node */
.mqtt-viz-node {
  position: absolute;
  background: rgba(30, 30, 30, 0.95);
  border: 1px solid rgba(255, 255, 255, 0.12);
  border-left: 3px solid rgba(255, 255, 255, 0.15);
  border-radius: 6px;
  overflow: hidden;
  transition: border-color 0.15s, box-shadow 0.15s;
  cursor: default;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

.mqtt-viz-node:hover {
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(255, 255, 255, 0.08);
}

.mqtt-viz-node-root {
  box-shadow: 0 2px 12px rgba(0, 212, 170, 0.1), 0 2px 8px rgba(0, 0, 0, 0.3);
}

/* Node header */
.mqtt-viz-node-header {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 0 10px;
  height: 32px;
  background: rgba(255, 255, 255, 0.04);
  border-bottom: 1px solid rgba(255, 255, 255, 0.06);
  font-size: 11px;
  font-weight: 600;
}

.mqtt-viz-node-key {
  color: rgba(255, 255, 255, 0.9);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  flex: 1;
  min-width: 0;
}

/* Type badges */
.mqtt-viz-badge {
  font-size: 9px;
  font-weight: 700;
  padding: 2px 6px;
  border-radius: 3px;
  flex-shrink: 0;
  white-space: nowrap;
  letter-spacing: 0.3px;
}

.mqtt-viz-badge-object {
  color: #569CD6;
  background: rgba(86, 156, 214, 0.12);
}

.mqtt-viz-badge-array {
  color: #CE9178;
  background: rgba(206, 145, 120, 0.12);
}

/* Toggle button */
.mqtt-viz-toggle {
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 4px;
  border: none;
  background: rgba(255, 255, 255, 0.08);
  color: rgba(255, 255, 255, 0.4);
  cursor: pointer;
  flex-shrink: 0;
  transition: background 0.12s, color 0.12s;
  line-height: 1;
  padding: 0;
}

.mqtt-viz-toggle:hover {
  background: var(--accent-dim);
  color: var(--accent);
}

/* Properties */
.mqtt-viz-prop {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 0 10px;
  height: 24px;
  font-size: 11px;
  font-family: 'JetBrains Mono', ui-monospace, monospace;
  transition: background 0.1s;
}

.mqtt-viz-prop:hover {
  background: rgba(255, 255, 255, 0.03);
}

.mqtt-viz-prop-key {
  color: #9CDCFE;
  flex-shrink: 0;
  max-width: 100px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.mqtt-viz-prop-key::after {
  content: ':';
  color: rgba(255, 255, 255, 0.2);
  margin-left: 2px;
}

.mqtt-viz-prop-val {
  flex: 1;
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.mqtt-viz-val-string { color: #CE9178; }
.mqtt-viz-val-number { color: #B5CEA8; }
.mqtt-viz-val-boolean { color: #569CD6; }
.mqtt-viz-val-null { color: #808080; font-style: italic; }

/* Boolean check/cross icon */
.mqtt-viz-bool-icon {
  flex-shrink: 0;
  font-size: 11px;
  font-weight: 700;
}

/* Color swatch */
.mqtt-viz-color-swatch {
  width: 12px;
  height: 12px;
  border-radius: 2px;
  border: 1px solid rgba(255, 255, 255, 0.15);
  flex-shrink: 0;
}

/* Collapsed indicator */
.mqtt-viz-collapsed-indicator {
  padding: 0 10px;
  height: 24px;
  line-height: 24px;
  font-size: 10px;
  color: rgba(255, 255, 255, 0.25);
  font-style: italic;
}

.mqtt-viz-collapsed-clickable {
  cursor: pointer;
  transition: color 0.12s, background 0.12s;
}

.mqtt-viz-collapsed-clickable:hover {
  color: var(--accent);
  background: rgba(0, 212, 170, 0.05);
}

/* Connections (SVG) */
.mqtt-viz-connection {
  fill: none;
  stroke: rgba(255, 255, 255, 0.15);
  stroke-width: 1.5;
}

/* Messages & warnings */
.mqtt-viz-message {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100%;
  color: rgba(255, 255, 255, 0.2);
  font-size: 13px;
}

.mqtt-viz-warning {
  position: absolute;
  bottom: 8px;
  right: 8px;
  padding: 4px 10px;
  background: rgba(245, 158, 11, 0.15);
  border: 1px solid rgba(245, 158, 11, 0.3);
  border-radius: 4px;
  color: #f59e0b;
  font-size: 11px;
  pointer-events: none;
}
